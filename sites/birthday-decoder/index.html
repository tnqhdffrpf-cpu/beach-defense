<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Birthday Decoder</title>
    <style>
      :root {
        --bg1: #070d1f;
        --bg2: #111d3b;
        --panel: rgba(255, 255, 255, 0.09);
        --line: rgba(255, 255, 255, 0.2);
        --txt: #f4f7ff;
        --muted: #b8c3dd;
        --accent: #7ed4ff;
        --ok: #79f2b2;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        min-height: 100vh;
        color: var(--txt);
        font-family: "Avenir Next", "Segoe UI", sans-serif;
        background:
          radial-gradient(circle at 20% 0%, rgba(59, 110, 255, 0.34), transparent 35%),
          radial-gradient(circle at 85% 100%, rgba(139, 66, 191, 0.22), transparent 38%),
          linear-gradient(180deg, var(--bg2), var(--bg1));
      }
      .wrap {
        width: min(860px, 94vw);
        margin: 0 auto;
        padding: 1.2rem 0 2rem;
      }
      .panel {
        border: 1px solid var(--line);
        border-radius: 18px;
        background: var(--panel);
        backdrop-filter: blur(8px);
        padding: 1.1rem;
      }
      h1 { margin: 0; font-size: clamp(1.45rem, 3.2vw, 2.1rem); }
      p { color: var(--muted); line-height: 1.5; }
      .step-list {
        margin: 0.8rem 0 0;
        padding-left: 1.15rem;
      }
      .step-list li { margin: 0.38rem 0; }
      .math {
        margin-top: 1rem;
        padding: 0.75rem;
        border: 1px solid var(--line);
        border-radius: 12px;
        background: rgba(0,0,0,0.2);
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
        color: var(--accent);
      }
      .decode {
        margin-top: 1rem;
        display: grid;
        gap: 0.7rem;
      }
      label { font-weight: 700; color: #d8e3ff; font-size: 0.92rem; }
      input {
        width: 100%;
        max-width: 260px;
        border-radius: 10px;
        border: 1px solid var(--line);
        background: rgba(255,255,255,0.09);
        color: white;
        font-size: 1rem;
        padding: 0.62rem 0.7rem;
      }
      .row { display: flex; gap: 0.6rem; flex-wrap: wrap; align-items: center; }
      button, a.btn {
        border: 1px solid rgba(255,255,255,0.28);
        border-radius: 10px;
        background: rgba(32, 104, 230, 0.9);
        color: white;
        font-weight: 800;
        text-decoration: none;
        padding: 0.58rem 0.86rem;
        cursor: pointer;
      }
      a.btn.secondary { background: rgba(255,255,255,0.12); }
      .result {
        margin-top: 0.65rem;
        border: 1px solid var(--line);
        border-radius: 12px;
        padding: 0.75rem;
        min-height: 62px;
        background: rgba(0,0,0,0.2);
      }
      .result strong { color: var(--ok); font-size: 1.2rem; }
      .muted { color: var(--muted); }
    </style>
  </head>
  <body>
    <main class="wrap">
      <section class="panel">
        <h1>Birthday Decoder</h1>
        <p>
          A classic mentalism math trick. Ask someone to do the steps silently using their birth month/day,
          then enter their final number to reveal the birthday.
        </p>

        <ol class="step-list">
          <li>Take your birth <strong>month number</strong> (Jan = 1 ... Dec = 12).</li>
          <li>Multiply by 5.</li>
          <li>Add 6.</li>
          <li>Multiply by 4.</li>
          <li>Add 9.</li>
          <li>Multiply by 5.</li>
          <li>Add your birth <strong>day</strong>.</li>
          <li>Tell me the final result.</li>
        </ol>

        <div class="math">Decoder formula: <strong>finalNumber - 165</strong> = <strong>MMDD</strong></div>

        <div class="decode">
          <label for="finalNumber">Final number from spectator</label>
          <div class="row">
            <input id="finalNumber" type="number" inputmode="numeric" placeholder="Enter number..." />
            <button id="decodeBtn">Decode Birthday</button>
            <button id="clearBtn" class="secondary">Clear</button>
          </div>

          <div id="result" class="result">
            <span class="muted">Waiting for a final number...</span>
          </div>

          <div class="row">
            <a class="btn secondary" href="../">Back to Project Hub</a>
          </div>
        </div>
      </section>
    </main>

    <script>
      const months = [
        "", "January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"
      ];

      const daysInMonth = (m) => {
        if (m === 2) return 29; // allow leap-day reveals
        if ([4, 6, 9, 11].includes(m)) return 30;
        return 31;
      };

      const input = document.getElementById("finalNumber");
      const decodeBtn = document.getElementById("decodeBtn");
      const clearBtn = document.getElementById("clearBtn");
      const result = document.getElementById("result");

      function setResult(html) {
        result.innerHTML = html;
      }

      function decode() {
        const raw = Number(input.value);
        if (!Number.isFinite(raw) || !Number.isInteger(raw)) {
          setResult('<span class="muted">Enter a whole number first.</span>');
          return;
        }

        const decoded = raw - 165;
        const month = Math.floor(decoded / 100);
        const day = decoded % 100;

        if (month < 1 || month > 12) {
          setResult('<span class="muted">That number does not decode to a valid month.</span>');
          return;
        }
        if (day < 1 || day > daysInMonth(month)) {
          setResult('<span class="muted">Month decoded, but day is invalid for that month.</span>');
          return;
        }

        setResult(`<strong>${months[month]} ${day}</strong><br><span class="muted">(decoded from ${raw} using N - 165)</span>`);
      }

      decodeBtn.addEventListener("click", decode);
      clearBtn.addEventListener("click", () => {
        input.value = "";
        setResult('<span class="muted">Waiting for a final number...</span>');
      });
      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") decode();
      });
    </script>
  </body>
</html>
